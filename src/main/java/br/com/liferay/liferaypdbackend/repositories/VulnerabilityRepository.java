package br.com.liferay.liferaypdbackend.repositories;

import br.com.liferay.liferaypdbackend.models.VulnerabilityModel;
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Query;
import org.springframework.data.repository.query.Param;
import org.springframework.stereotype.Repository;

import java.util.Optional;
import java.util.UUID;

@Repository
public interface VulnerabilityRepository extends JpaRepository<VulnerabilityModel, UUID> {
    boolean existsByOtherAndMonetaryAndHealthAndHomeless(
            String other,
            Boolean monetary,
            Boolean health,
            Boolean homeless
    );

    @Query(value = "select vln from VulnerabilityModel vln " +
            "where vln.other = :other " +
            "and vln.monetary = :monetary " +
            "and vln.health = :health " +
            "and vln.homeless = :homeless")
    Optional<VulnerabilityModel> findByAll(
            @Param(value = "other") String other,
            @Param(value = "monetary") Boolean monetary,
            @Param(value = "health") Boolean health,
            @Param(value = "homeless") Boolean homeless
    );
}
